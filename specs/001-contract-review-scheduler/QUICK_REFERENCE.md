# å¥‘ç´„å¯©æŸ¥é ç´„ç³»çµ± - å¿«é€Ÿåƒè€ƒæŒ‡å— v2.0

**å¿«é€ŸæŸ¥è©¢**: ç”¨æ–¼å¿«é€Ÿæ‰¾åˆ°æ‰€éœ€è³‡è¨Šçš„ç´¢å¼•è¡¨  
**æœ€å¾Œæ›´æ–°**: 2025-11-18  

---

## ğŸ“‹ æˆ‘éœ€è¦... (å¿«é€Ÿå°è¦½)

### ğŸ’¡ äº†è§£ç³»çµ±åŠŸèƒ½
â†’ é–±è®€ [`spec.md`](./spec.md) (ç¬¬ 1-50 è¡Œ) ä¸­çš„ 4 å€‹ä½¿ç”¨æ¡ˆä¾‹

### ğŸ—ï¸ äº†è§£æ•´é«”æ¶æ§‹
â†’ æŸ¥çœ‹ [`frontend-backend-integration.md`](./frontend-backend-integration.md) ä¸­çš„æ¶æ§‹æ¦‚è§€åœ–

### ğŸ‘¨â€ğŸ’» é–‹å§‹å¾Œç«¯é–‹ç™¼
```
1. é–±è®€ [`quickstart.md`](./quickstart.md) - ç’°å¢ƒè¨­ç½®
2. åŸ·è¡Œå‘½ä»¤è¨­ç½®ç’°å¢ƒ
3. æŸ¥çœ‹ [`data-model.md`](./data-model.md) - è³‡æ–™æ¨¡å‹
4. ä½¿ç”¨ [`tasks.md`](./tasks.md) å„ªå…ˆç´š 1 é–‹å§‹
```

### ğŸ¨ é–‹å§‹å‰ç«¯é–‹ç™¼
```
1. é–±è®€ [`frontend-quickstart.md`](./frontend-quickstart.md) - ç’°å¢ƒè¨­ç½®
2. åŸ·è¡Œå‘½ä»¤è¨­ç½®ç’°å¢ƒ
3. æŸ¥çœ‹ [`frontend-components.md`](./frontend-components.md) - å…ƒä»¶çµæ§‹
4. ä½¿ç”¨ [`tasks.md`](./tasks.md) å„ªå…ˆç´š 0 é–‹å§‹
```

### ğŸ”Œ äº†è§£ API è¦ç´„
â†’ æŸ¥çœ‹ [`contracts/openapi.yaml`](./contracts/openapi.yaml) æˆ– Swagger UI

### ğŸ” äº†è§£èªè­‰æµç¨‹
â†’ é–±è®€ [`frontend-backend-integration.md`](./frontend-backend-integration.md) ä¸­çš„èªè­‰æµç¨‹éƒ¨åˆ†

### ğŸ“Š æŸ¥çœ‹é€²åº¦å’Œå·¥æœŸ
â†’ æŸ¥çœ‹ [`tasks.md`](./tasks.md) ä¸­çš„å„ªå…ˆç´šå’Œå·¥æ™‚ä¼°ç®—

### ğŸ§ª äº†è§£æ¸¬è©¦ç­–ç•¥
â†’ æŸ¥çœ‹ [`tasks.md`](./tasks.md) ä¸­å„ªå…ˆç´š 6 (å¾Œç«¯) æˆ–å„ªå…ˆç´š B (å‰ç«¯)

### ğŸš€ éƒ¨ç½²æº–å‚™
â†’ æŸ¥çœ‹ [`frontend-quickstart.md`](./frontend-quickstart.md) æˆ– [`quickstart.md`](./quickstart.md) ä¸­çš„éƒ¨ç½²éƒ¨åˆ†

### ğŸ‘¥ å‰å¾Œç«¯å”èª¿
â†’ é–±è®€ [`frontend-backend-integration.md`](./frontend-backend-integration.md) ä¸­çš„é–‹ç™¼å”èª¿éƒ¨åˆ†

### ğŸ“– æŸ¥çœ‹æ‰€æœ‰æ–‡ä»¶
â†’ æŸ¥çœ‹ [`README.md`](./README.md) çš„æˆå“çŸ©é™£

---

## ğŸ¯ é—œéµæ±ºç­–å¿«é€ŸæŸ¥è©¢

### å¾Œç«¯ç‚ºä»€éº¼é¸æ“‡...?

| æ±ºç­– | ç†ç”± | æ–‡ä»¶ |
|------|------|------|
| ASP.NET Core 8.0 | ä¼æ¥­ç´šæ¡†æ¶ï¼ŒLDAP æ”¯æ´ | [`research.md`](./research.md) #1 |
| SQL Server 2019+ | ä¼æ¥­ç´šè³‡æ–™åº«ï¼ŒT-SQL æ”¯æ´ | [`research.md`](./research.md) #3 |
| Entity Framework Core | Code First æ–¹å¼ï¼Œè‡ªå‹•é·ç§» | [`research.md`](./research.md) #4 |
| ç„¡ AutoMapperï¼Œä½¿ç”¨ POCO | ç°¡åŒ–æ˜ å°„é‚è¼¯ | [`research.md`](./research.md) #5 |
| IMemoryCache ç„¡ Redis | ç°¡åŒ–éƒ¨ç½²ï¼Œè¶³å¤ æ‡‰ç”¨å±¤å¿«å– | [`research.md`](./research.md) #6 |
| Traditional Controllers | RESTful æ¨™æº–ï¼Œæ˜“æ–¼ç†è§£ | [`research.md`](./research.md) #7 |
| LDAP + JWT | ä¼æ¥­èªè­‰ + ç„¡ç‹€æ…‹ API | [`research.md`](./research.md) #1, #8 |

### å‰ç«¯ç‚ºä»€éº¼é¸æ“‡...?

| æ±ºç­– | ç†ç”± | æ–‡ä»¶ |
|------|------|------|
| React 19.2.0 | ç¾ä»£ Hook æ¶æ§‹ï¼Œæ´»èºç¤¾ç¾¤ | [`frontend-research.md`](./frontend-research.md) #1 |
| TypeScript 5.6 | å‹åˆ¥å®‰å…¨ï¼Œæå‡é–‹ç™¼é«”é©— | [`frontend-research.md`](./frontend-research.md) #2 |
| Bootstrap 5.3+ | å®Œæ•´å…ƒä»¶åº«ï¼Œå¿«é€ŸåŸå‹ | [`frontend-research.md`](./frontend-research.md) #3 |
| Vite æ§‹å»ºå·¥å…· | å¿«é€Ÿé–‹ç™¼ä¼ºæœå™¨ | [`frontend-research.md`](./frontend-research.md) #4 |
| React Router v6 | å®¢ç«¯è·¯ç”±ï¼Œæ”¯æ´åµŒå¥—è·¯ç”± | [`frontend-research.md`](./frontend-research.md) #5 |
| Axios | ç°¡å–® HTTP å®¢æˆ¶ç«¯ï¼Œæ””æˆªå™¨æ”¯æ´ | [`frontend-research.md`](./frontend-research.md) #6 |
| Context API | è¼•é‡ç´šç‹€æ…‹ï¼Œç„¡éœ€ Redux | [`frontend-research.md`](./frontend-research.md) #7 |
| React Big Calendar | å°ˆæ¥­æ—¥ç¨‹å…ƒä»¶ | [`frontend-research.md`](./frontend-research.md) #8 |
| Formik + Yup | è¡¨å–®é©—è­‰æ¨™æº–æ–¹æ¡ˆ | [`frontend-research.md`](./frontend-research.md) #9 |
| Vitest | ç¾ä»£æ¸¬è©¦æ¡†æ¶ï¼Œå¿«é€Ÿ | [`frontend-research.md`](./frontend-research.md) #10 |
| i18n-next | åœ‹éš›åŒ–æ¨™æº–ï¼Œç¹é«”ä¸­æ–‡æ”¯æ´ | [`frontend-research.md`](./frontend-research.md) #12 |

---

## ğŸ“Š å·¥ä½œé …é€ŸæŸ¥è¡¨

### å¾Œç«¯å„ªå…ˆç´š 1: åŸºç¤è¨­æ–½ (7.5h)
| Task | åç¨± | å·¥æ™‚ | å…§å®¹ |
|------|------|------|------|
| 1.1 | å°ˆæ¡ˆåˆå§‹åŒ– | 1.5h | å»ºç«‹ ASP.NET Core å°ˆæ¡ˆçµæ§‹ |
| 1.2 | NuGet å¥—ä»¶ | 1h | å®‰è£ EF Coreã€Serilog ç­‰ |
| 1.3 | DbContext é…ç½® | 2h | å»ºç«‹ ApplicationDbContext |
| 1.4 | è³‡æ–™åº«é·ç§» | 1.5h | åŸ·è¡Œ EF Core é·ç§» |
| 1.5 | æ¸¬è©¦é€£ç·š | 1.5h | é©—è­‰è³‡æ–™åº«é€£ç·š |

### å¾Œç«¯å„ªå…ˆç´š 2: èªè­‰æˆæ¬Š (12h)
| Task | åç¨± | å·¥æ™‚ |
|------|------|------|
| 2.1 | LDAP èªè­‰ | 3h |
| 2.2 | JWT å¯¦ç¾ | 3h |
| 2.3 | AuthController | 2h |
| 2.4 | RBAC æˆæ¬Š | 2h |
| 2.5 | æ¸¬è©¦èªè­‰æµç¨‹ | 2h |

### å‰ç«¯å„ªå…ˆç´š 0: åŸºç¤è¨­æ–½ (8.5h)
| Task | åç¨± | å·¥æ™‚ | å…§å®¹ |
|------|------|------|------|
| 0.1 | React å°ˆæ¡ˆå»ºç«‹ | 1h | Vite + React åˆå§‹åŒ– |
| 0.2 | å¥—ä»¶å®‰è£ | 1h | ä¾è³´ç®¡ç† |
| 0.3 | AuthContext å»ºç«‹ | 3h | JWT Token ç®¡ç† |
| 0.4 | API å®¢æˆ¶ç«¯ | 3.5h | Axios è¨­ç½® + æ””æˆªå™¨ |

### å‰ç«¯å„ªå…ˆç´š A: æ ¸å¿ƒåŠŸèƒ½ (15.5h)
| Task | åç¨± | å·¥æ™‚ | å…§å®¹ |
|------|------|------|------|
| A.1 | ç™»å…¥è¡¨å–® | 2.5h | Formik + é©—è­‰ |
| A.2 | é ç´„è¡¨å–® | 3h | è¤‡é›œè¡¨å–®è¨­è¨ˆ |
| A.3 | é ç´„å¡ç‰‡åˆ—è¡¨ | 2.5h | éŸ¿æ‡‰å¼åˆ—è¡¨ |
| A.4 | æ—¥ç¨‹è¦–åœ– | 3h | React Big Calendar |
| A.5 | ç¢ºèªå°è©±æ¡† | 2h | ä½¿ç”¨è€…ç¢ºèª UI |
| A.6 | ä¼‘å‡ç®¡ç† | 2.5h | ä¼‘å‡æ’ç¨‹è¡¨å–® |

---

## ğŸ”Œ API ç«¯é»é€ŸæŸ¥è¡¨

### èªè­‰ç›¸é—œ
```
POST   /api/auth/login              ç™»å…¥
POST   /api/auth/verify             é©—è­‰ Token
```

### é ç´„ç›¸é—œ
```
POST   /api/appointments            å»ºç«‹é ç´„
GET    /api/appointments            å–å¾—åˆ—è¡¨
GET    /api/appointments/{id}       å–å¾—è©³æƒ…
PATCH  /api/appointments/{id}/confirm     ç¢ºèªé ç´„
PATCH  /api/appointments/{id}/reject      æ‹’çµ•é ç´„
```

### ç•°è­°ç›¸é—œ
```
POST   /api/appointments/{id}/objections  æäº¤ç•°è­°
GET    /api/objections              å–å¾—ç•°è­°åˆ—è¡¨
```

### ä¼‘å‡ç›¸é—œ
```
POST   /api/leave-schedules         æ–°å¢ä¼‘å‡
GET    /api/leave-schedules         å–å¾—ä¼‘å‡
```

ğŸ“– **å®Œæ•´è¦ç´„**: [`contracts/openapi.yaml`](./contracts/openapi.yaml)

---

## ğŸ’¾ è³‡æ–™æ¨¡å‹é€ŸæŸ¥

### æ ¸å¿ƒå¯¦é«”
```
User
â”œâ”€ id: GUID
â”œâ”€ adAccount: string (WiAD å¸³è™Ÿ)
â”œâ”€ name: string
â”œâ”€ email: string
â”œâ”€ role: enum (applicant, reviewer)
â””â”€ isActive: bool

Appointment
â”œâ”€ id: GUID
â”œâ”€ objectName: string (åˆç´„åç¨±)
â”œâ”€ timeStart: DateTime
â”œâ”€ timeEnd: DateTime
â”œâ”€ status: enum (pending, confirmed, rejected)
â”œâ”€ applicantId: GUID (FK User)
â”œâ”€ reviewerId: GUID (FK User, nullable)
â””â”€ createdAt: DateTime

LeaveSchedule
â”œâ”€ id: GUID
â”œâ”€ userId: GUID (FK User)
â”œâ”€ startDate: Date
â”œâ”€ endDate: Date
â””â”€ reason: string

AppointmentHistory (å¯©è¨ˆ)
â”œâ”€ id: GUID
â”œâ”€ appointmentId: GUID (FK)
â”œâ”€ action: enum (created, confirmed, rejected)
â”œâ”€ performedBy: GUID (FK User)
â””â”€ timestamp: DateTime

NotificationLog (éƒµä»¶ç´€éŒ„)
â”œâ”€ id: GUID
â”œâ”€ recipient: string
â”œâ”€ subject: string
â”œâ”€ status: enum (pending, sent, failed)
â””â”€ sentAt: DateTime?
```

ğŸ“– **å®Œæ•´å®šç¾©**: [`data-model.md`](./data-model.md)

---

## ğŸ—‚ï¸ æª”æ¡ˆç›®éŒ„çµæ§‹

### å¾Œç«¯ (ASP.NET Core)
```
src/
â”œâ”€ Controllers/
â”‚  â”œâ”€ AuthController.cs
â”‚  â”œâ”€ AppointmentsController.cs
â”‚  â””â”€ LeaveSchedulesController.cs
â”œâ”€ Models/
â”‚  â”œâ”€ User.cs
â”‚  â”œâ”€ Appointment.cs
â”‚  â””â”€ LeaveSchedule.cs
â”œâ”€ Services/
â”‚  â”œâ”€ AuthService.cs
â”‚  â”œâ”€ AppointmentService.cs
â”‚  â””â”€ EmailService.cs
â”œâ”€ Data/
â”‚  â”œâ”€ ApplicationDbContext.cs
â”‚  â””â”€ Migrations/
â”œâ”€ Filters/
â”‚  â””â”€ JwtAuthenticationFilter.cs
â””â”€ appsettings.json
```

### å‰ç«¯ (React + TypeScript)
```
src/
â”œâ”€ components/
â”‚  â”œâ”€ Layout/
â”‚  â”‚  â”œâ”€ AppShell.tsx
â”‚  â”‚  â””â”€ Navigation.tsx
â”‚  â”œâ”€ Auth/
â”‚  â”‚  â”œâ”€ LoginForm.tsx
â”‚  â”‚  â””â”€ LoginPage.tsx
â”‚  â”œâ”€ Appointments/
â”‚  â”‚  â”œâ”€ AppointmentForm.tsx
â”‚  â”‚  â”œâ”€ AppointmentCard.tsx
â”‚  â”‚  â””â”€ AppointmentList.tsx
â”‚  â””â”€ Calendar/
â”‚     â””â”€ CalendarView.tsx
â”œâ”€ pages/
â”‚  â”œâ”€ LoginPage.tsx
â”‚  â”œâ”€ DashboardPage.tsx
â”‚  â””â”€ CalendarPage.tsx
â”œâ”€ contexts/
â”‚  â””â”€ AuthContext.tsx
â”œâ”€ hooks/
â”‚  â”œâ”€ useAppointments.ts
â”‚  â””â”€ useAuth.ts
â”œâ”€ api/
â”‚  â”œâ”€ client.ts
â”‚  â”œâ”€ appointments.ts
â”‚  â””â”€ auth.ts
â”œâ”€ types/
â”‚  â””â”€ index.ts
â”œâ”€ App.tsx
â””â”€ main.tsx
```

---

## ğŸ¯ å¸¸è¦‹ä»»å‹™å¿«é€ŸæŒ‡ä»¤

### å¾Œç«¯ (ASP.NET Core)

**å»ºç«‹æ–°æ§åˆ¶å™¨**
```bash
dotnet add package Microsoft.EntityFrameworkCore
dotnet aspnet-codegenerator controller -name MyController -async -api
```

**åŸ·è¡Œè³‡æ–™åº«é·ç§»**
```bash
dotnet ef migrations add InitialCreate
dotnet ef database update
```

**åŸ·è¡Œæ¸¬è©¦**
```bash
dotnet test
```

**åŸ·è¡Œæ‡‰ç”¨**
```bash
dotnet run
```

### å‰ç«¯ (React)

**å»ºç«‹æ–°å…ƒä»¶**
```bash
npm create vite@latest my-project -- --template react-ts
```

**å®‰è£å¥—ä»¶**
```bash
npm install react-bootstrap bootstrap axios formik yup react-big-calendar
```

**åŸ·è¡Œé–‹ç™¼ä¼ºæœå™¨**
```bash
npm run dev    # Vite é–‹ç™¼ä¼ºæœå™¨ (http://localhost:5173)
```

**åŸ·è¡Œæ¸¬è©¦**
```bash
npm run test
```

**æ§‹å»ºç”Ÿç”¢ç‰ˆ**
```bash
npm run build
```

---

## ğŸ” é™¤éŒ¯æŠ€å·§

### å¾Œç«¯å¸¸è¦‹å•é¡Œ

| å•é¡Œ | è§£æ±ºæ–¹æ¡ˆ |
|------|---------|
| EF Core é·ç§»å¤±æ•— | æª¢æŸ¥é€£æ¥å­—ç¬¦ä¸² + è³‡æ–™åº«æ¬Šé™ |
| LDAP èªè­‰å¤±æ•— | é©—è­‰ LDAP é€£æ¥åƒæ•¸ + WiAD å¸³è™Ÿ |
| JWT Token ç„¡æ•ˆ | æª¢æŸ¥ç°½ç½²å¯†é‘° + éæœŸæ™‚é–“ |
| éƒµä»¶æœªç™¼é€ | æª¢æŸ¥ SMTP è¨­å®š + éƒµç®±å¯†ç¢¼ |

### å‰ç«¯å¸¸è¦‹å•é¡Œ

| å•é¡Œ | è§£æ±ºæ–¹æ¡ˆ |
|------|---------|
| API é€£æ¥å¤±æ•— | æª¢æŸ¥ VITE_API_URL ç’°å¢ƒè®Šæ•¸ |
| CORS éŒ¯èª¤ | æª¢æŸ¥å¾Œç«¯ CORS é…ç½® |
| TypeScript éŒ¯èª¤ | åŸ·è¡Œ `npm run build` æª¢æŸ¥ç·¨è­¯ |
| ç†±é‡è¼‰ä¸å·¥ä½œ | é‡å•Ÿé–‹ç™¼ä¼ºæœå™¨ |

---

## ğŸ“ å¿«é€Ÿè¯çµ¡

### æ–‡ä»¶å•é¡Œ
- åŠŸèƒ½å®šç¾©ä¸æ¸…: â†’ [`spec.md`](./spec.md)
- æŠ€è¡“æ±ºç­–ç–‘å•: â†’ [`research.md`](./research.md) / [`frontend-research.md`](./frontend-research.md)
- API è¦ç´„æŸ¥è©¢: â†’ [`contracts/openapi.yaml`](./contracts/openapi.yaml)

### é–‹ç™¼ç’°å¢ƒå•é¡Œ
- å¾Œç«¯ç’°å¢ƒ: â†’ [`quickstart.md`](./quickstart.md)
- å‰ç«¯ç’°å¢ƒ: â†’ [`frontend-quickstart.md`](./frontend-quickstart.md)

### å·¥ä½œä»»å‹™å•é¡Œ
- ä»»å‹™æ¸…å–®: â†’ [`tasks.md`](./tasks.md)
- å·¥æœŸä¼°ç®—: â†’ [`tasks.md`](./tasks.md) ä¸­çš„å·¥æ™‚æ¬„ä½
- å„ªå…ˆç´šå®‰æ’: â†’ [`tasks.md`](./tasks.md) ä¸­çš„å„ªå…ˆç´šåˆ†é¡

---

## âœ… å®šæœŸæª¢æŸ¥æ¸…å–®

### æ¯æ—¥é–‹ç™¼å‰
- âœ… åŒæ­¥æœ€æ–° Git åˆ†æ”¯
- âœ… æª¢æŸ¥ç•¶æ—¥ä»»å‹™å„ªå…ˆç´š
- âœ… ç¢ºèª API æ˜¯å¦æœ‰æ›´æ–°

### æ¯å‘¨çµæŸ
- âœ… å–®å…ƒæ¸¬è©¦è¦†è“‹ç‡ â‰¥80%
- âœ… ä»£ç¢¼å¯©æŸ¥é€šé
- âœ… æ›´æ–°ä»»å‹™é€²åº¦ç‹€æ…‹

### é€²åº¦é‡Œç¨‹ç¢‘
- âœ… W1 çµæŸ: åŸºç¤è¨­æ–½å®Œæˆ (å¾Œç«¯ Task 1, å‰ç«¯ Task 0)
- âœ… W3 çµæŸ: èªè­‰ç³»çµ±å®Œæˆ (å¾Œç«¯ Task 2)
- âœ… W5 çµæŸ: æ ¸å¿ƒåŠŸèƒ½å®Œæˆ (å¾Œç«¯ Task 3-4, å‰ç«¯ Task A)
- âœ… W7 çµæŸ: æ•´é«”å®Œæˆ (æ¸¬è©¦ + éƒ¨ç½²æº–å‚™)

---

**æ­¤å¿«é€Ÿåƒè€ƒæŒ‡å—æ—¨åœ¨åŠ é€ŸæŸ¥è©¢ã€‚å¦‚éœ€è©³ç´°èªªæ˜ï¼Œè«‹åƒè€ƒå®Œæ•´æ–‡ä»¶ã€‚** ğŸ“–

**ç‰ˆæœ¬**: 2.0 | **æœ€å¾Œæ›´æ–°**: 2025-11-18 | **ç‹€æ…‹**: âœ… æœ‰æ•ˆ
